<!DOCTYPE html>
<html lang="en-us">
<head>
  <title>rpn_manual.nim</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2280%22>ğŸ³</text></svg>">
  <meta content="text/html; charset=utf-8" http-equiv="content-type">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="nimib 0.3.12" name="generator">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/water.css">
  <link rel="stylesheet" media="(prefers-color-scheme: dark)"
  href="https://cdn.jsdelivr.net/gh/highlightjs/highlight.js/src/styles/github-dark.css">
<link rel="stylesheet" media="(prefers-color-scheme: light)"
  href="https://cdn.jsdelivr.net/gh/highlightjs/highlight.js/src/styles/github.css">
    <script src="https://cdn.jsdelivr.net/gh/pietroppeter/nimib@main/assets/highlight.min.js"></script>
<script>hljs.highlightAll();</script>

  <style>
.nb-box {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.nb-small {
  font-size: 0.8rem;
}
button.nb-small {
  float: right;
  padding: 2px;
  padding-right: 5px;
  padding-left: 5px;
}
section#source {
  display:none
}
pre > code {
  font-size: 1.2em;
}
.nb-output {
  line-height: 1.15;
}
figure {
  margin: 2rem 0;
}
figcaption {
  text-align: center;
}
  
</style>
  
</head>
<body>
<header>
<div class="nb-box">
  <span><a href=".">ğŸ¡</a></span>
  <span><code>rpn_manual.nim</code></span>
  <span></span>
</div>
<hr>
</header><main>
<style>
pre code{border-radius:6px}pre{border:1px solid #809eb7;border-radius:6px 6px 0 0;margin-bottom:0}
pre.nb-output{border:1px solid #809eb7;border-radius:0 0 6px 6px;border-top:none;padding:.8em;margin-top:0;overflow-x:auto;background:#f8f8f8}
</style>
<h1>ã€Šç°ä»£ C++ æ‰‹æŠŠæ‰‹å®ç° RPN è®¡ç®—å™¨ã€‹</h1>
<ul>
<li>ç‰ˆæœ¬ï¼š1.0</li>
<li>ç¼–è¯‘å™¨ï¼šGCC 10+ / Clang 12+ / MSVC 2019+</li>
<li>æ ‡å‡†ï¼šC++20</li>
</ul>
<h2>ç›®å½•</h2>
<ol>
<li><a href="#ç¬¬-1-ç« ï¼šhello-rpn">ç¬¬ 1 ç« ï¼šHello RPN</a>
<ul>
<li><a href="#rpn_min.cpp">rpn_min.cpp</a></li>
</ul>
</li>
<li><a href="#ç¬¬-2-ç« ï¼šå¤´æ–‡ä»¶åŒ–-+-å•å…ƒæµ‹è¯•">ç¬¬ 2 ç« ï¼šå¤´æ–‡ä»¶åŒ– + å•å…ƒæµ‹è¯•</a>
<ul>
<li><a href="#rpn_engine.hpp">rpn_engine.hpp</a></li>
<li><a href="#test.cpp">test.cpp</a></li>
</ul>
</li>
<li><a href="#ç¬¬-3-ç« ï¼šäº¤äº’å¼-repl">ç¬¬ 3 ç« ï¼šäº¤äº’å¼ REPL</a>
<ul>
<li><a href="#repl.cpp">repl.cpp</a></li>
</ul>
</li>
<li><a href="#ç¬¬-4-ç« ï¼šå•æ–‡ä»¶å‘å¸ƒ-&-äº¤å‰ç¼–è¯‘">ç¬¬ 4 ç« ï¼šå•æ–‡ä»¶å‘å¸ƒ &amp; äº¤å‰ç¼–è¯‘</a>
<ul>
<li><a href="#linuxâ†’windows-äº¤å‰ç¼–è¯‘">Linuxâ†’Windows äº¤å‰ç¼–è¯‘</a></li>
</ul>
</li>
<li><a href="#ç¬¬-5-ç« ï¼šè¯¾åæŒ‘æˆ˜">ç¬¬ 5 ç« ï¼šè¯¾åæŒ‘æˆ˜</a></li>
</ol>
<p><a name="ç¬¬-1-ç« ï¼šhello-rpn"></a>
<br></p>
<h3>ç¬¬ 1 ç« ï¼šHello RPN</h3>
<hr />
<p>å…ˆç»™å‡ºä¸€ä¸ª<strong>æœ€å°å¯è¿è¡Œ</strong>ç‰ˆæœ¬ï¼Œä¿å­˜ä¸º <code>rpn_min.cpp</code>ã€‚</p>
<p><a name="rpn_min.cpp"></a>
<br></p>
<h4>rpn_min.cpp</h4>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;sstream&gt;
#include &lt;stack&gt;
#include &lt;stdexcept&gt;

double rpn(const std::string& line){
    std::stack&lt;double&gt; st;
    std::istringstream iss(line);
    std::string tok;
    while (iss >> tok){
        if (tok == "+" || tok == "-" || tok == "*" || tok == "/"){
            if (st.size() < 2) throw std::runtime_error("need 2 operands");
            double b = st.top(); st.pop();
            double a = st.top(); st.pop();
            switch (tok[0]){
                case '+': st.push(a + b); break;
                case '-': st.push(a - b); break;
                case '*': st.push(a * b); break;
                case '/':
                    if (b == 0) throw std::runtime_error("divide by 0");
                    st.push(a / b); break;
            }
        } else {
            st.push(std::stod(tok));
        }
    }
    if (st.size() != 1) throw std::runtime_error("stack size != 1");
    return st.top();
}

int main(){
    std::cout << "RPN> ";
    std::string line;
    std::getline(std::cin, line);
    try {
        std::cout << "Result: " << rpn(line) << '\n';
    } catch (const std::exception& ex){
        std::cerr << "Error: " << ex.what() << '\n';
    }
}
</code></pre>
<p>ç¼–è¯‘ &amp; è¿è¡Œï¼š</p>
<p><a name="ç¬¬-2-ç« ï¼šå¤´æ–‡ä»¶åŒ–-+-å•å…ƒæµ‹è¯•"></a>
<br></p>
<h3>ç¬¬ 2 ç« ï¼šå¤´æ–‡ä»¶åŒ– + å•å…ƒæµ‹è¯•</h3>
<hr />
<p><a name="rpn_engine.hpp"></a>
<br></p>
<h4>rpn_engine.hpp</h4>
<pre><code class="language-cpp">#pragma once
#include &lt;stack&gt;
#include &lt;sstream&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;

double evaluateRPN(const std::string& expr){
    std::stack&lt;double&gt; st;
    std::istringstream iss(expr);
    std::string tok;
    while (iss >> tok){
        if (tok.size() == 1 && std::string("+-*/").find(tok[0]) != std::string::npos){
            if (st.size() < 2) throw std::runtime_error("stack underflow");
            double b = st.top(); st.pop();
            double a = st.top(); st.pop();
            switch (tok[0]){
                case '+': st.push(a + b); break;
                case '-': st.push(a - b); break;
                case '*': st.push(a * b); break;
                case '/':
                    if (b == 0) throw std::runtime_error("divide by zero");
                    st.push(a / b); break;
            }
        } else {
            st.push(std::stod(tok));
        }
    }
    if (st.size() != 1) throw std::runtime_error("single value expected");
    return st.top();
}
</code></pre>
<p><a name="test.cpp"></a>
<br></p>
<h4>test.cpp</h4>
<pre><code class="language-cpp">#define DOCTEST_CONFIG_IMPLEMENT_WITH_MAIN
#include "doctest/doctest.h"
#include "rpn_engine.hpp"

TEST_CASE("basic"){
    CHECK(evaluateRPN("3 4 +") == 7);
    CHECK(evaluateRPN("2 3 4 + *") == 14);
    CHECK(evaluateRPN("10 2 /") == 5);
}
TEST_CASE("exceptions"){
    CHECK_THROWS(evaluateRPN("1 +"));
    CHECK_THROWS(evaluateRPN("3 0 /"));
    CHECK_THROWS(evaluateRPN("1 2 3"));
}
</code></pre>
<p>ä¸‹è½½ <strong>doctest</strong> å•æ–‡ä»¶å¤´åº“å¹¶æ‰§è¡Œæµ‹è¯•ï¼š</p>
<p><a name="ç¬¬-3-ç« ï¼šäº¤äº’å¼-repl"></a>
<br></p>
<h3>ç¬¬ 3 ç« ï¼šäº¤äº’å¼ REPL</h3>
<hr />
<p>å€ŸåŠ© <code>linenoise</code> å•æ–‡ä»¶å¤´åº“å®ç°è¡Œç¼–è¾‘ä¸å†å²ã€‚</p>
<p><a name="repl.cpp"></a>
<br></p>
<h4>repl.cpp</h4>
<pre><code class="language-cpp">#include "rpn_engine.hpp"
#include "linenoise.hpp"
#include &lt;iomanip&gt;

int main(){
    const char* prompt = "rpn> ";
    std::string line;
    while (linenoise::Readline(prompt, line)){
        if (line == "exit" || line == "quit") break;
        try {
            double v = evaluateRPN(line);
            std::cout << "= " << std::setprecision(12) << v << '\n';
            linenoise::AddHistory(line.c_str());
        } catch (const std::exception& ex){
            std::cerr << "error: " << ex.what() << '\n';
        }
    }
}
</code></pre>
<p><a name="ç¬¬-4-ç« ï¼šå•æ–‡ä»¶å‘å¸ƒ-&-äº¤å‰ç¼–è¯‘"></a>
<br></p>
<h3>ç¬¬ 4 ç« ï¼šå•æ–‡ä»¶å‘å¸ƒ &amp; äº¤å‰ç¼–è¯‘</h3>
<hr />
<p>æŠŠå…¨éƒ¨æºç åˆå¹¶æˆ <code>rpn_single.cpp</code>ï¼Œ<code>-Os -s -DNDEBUG</code> ä¼˜åŒ–åä»… ~92 KBï¼ˆUPX åï¼‰ã€‚</p>
<p><a name="linuxâ†’windows-äº¤å‰ç¼–è¯‘"></a>
<br></p>
<h4>Linuxâ†’Windows äº¤å‰ç¼–è¯‘</h4>
<p><a name="ç¬¬-5-ç« ï¼šè¯¾åæŒ‘æˆ˜"></a>
<br></p>
<h3>ç¬¬ 5 ç« ï¼šè¯¾åæŒ‘æˆ˜</h3>
<hr />
<ol>
<li>å¢åŠ å¹‚è¿ç®— (<code>^</code>) ä¸å•ç›®è´Ÿå·</li>
<li>æ”¯æŒå˜é‡å­˜å‚¨ (<code>sto</code> / <code>rcl</code>)</li>
<li>ç”¨ <code>std::variant</code> å®ç°é«˜ç²¾åº¦æœ‰ç†æ•°ï¼Œé¿å…æµ®ç‚¹è¯¯å·®</li>
<li>ç¼–è¯‘ä¸º <strong>WebAssembly</strong>ï¼Œåœ¨æµè§ˆå™¨é‡Œè¿è¡Œï¼</li>
</ol>
<p>ç¥ hacking æ„‰å¿«ï¼</p>
</main>
<footer>
<div class="nb-box">
  <span><span class="nb-small">made with <a href="https://pietroppeter.github.io/nimib/">nimib ğŸ³</a></span></span>
  <span></span>
  <span><button class="nb-small" id="show" onclick="toggleSourceDisplay()">Show Source</button></span>
</div>
</footer>
<section id="source">
<pre><code class="nohighlight nim hljs"><span class="hljs-comment"># ************ 0. å‰ç½® import **********************************</span>
<span class="hljs-keyword">import</span> std/[strutils, os, sequtils]
<span class="hljs-keyword">import</span> nimib
<span class="hljs-keyword">import</span> ./lib/codeOutput          <span class="hljs-comment"># ä¼šçœŸæ­£ç”¨åˆ°ï¼Œä¿è¯æ—  UnusedImport</span>

<span class="hljs-comment"># ************ 1. ç›®å½• &amp; ç« èŠ‚æ¨¡æ¿ *******************************</span>
<span class="hljs-keyword">var</span> nbToc: <span class="hljs-type">NbBlock</span>

<span class="hljs-keyword">template</span> addToc =
  newNbBlock(<span class="hljs-string">&quot;nbText&quot;</span>, <span class="hljs-literal">false</span>, nb, nbToc, <span class="hljs-string">&quot;&quot;</span>):
    nbToc.output = <span class="hljs-string">&quot;## ç›®å½•</span><span class="hljs-meta">\n</span><span class="hljs-meta">\n</span><span class="hljs-string">&quot;</span>

<span class="hljs-keyword">template</span> nbNewSection(name: <span class="hljs-built_in">string</span>) =
  <span class="hljs-keyword">let</span> anch = name.toLower.replace(<span class="hljs-string">&quot; &quot;</span>, <span class="hljs-string">&quot;-&quot;</span>)
  nbText: <span class="hljs-string">&quot;&lt;a name=</span><span class="hljs-meta">\&quot;</span><span class="hljs-string">&quot;</span> &amp; anch &amp; <span class="hljs-string">&quot;</span><span class="hljs-meta">\&quot;</span><span class="hljs-string">&gt;&lt;/a&gt;</span><span class="hljs-meta">\n</span><span class="hljs-string">&lt;br&gt;</span><span class="hljs-meta">\n</span><span class="hljs-string">### &quot;</span> &amp; name &amp; <span class="hljs-string">&quot;</span><span class="hljs-meta">\n</span><span class="hljs-meta">\n</span><span class="hljs-string">---&quot;</span>
  nbToc.output.add <span class="hljs-string">&quot;1. &lt;a href=</span><span class="hljs-meta">\&quot;</span><span class="hljs-string">#&quot;</span> &amp; anch &amp; <span class="hljs-string">&quot;</span><span class="hljs-meta">\&quot;</span><span class="hljs-string">&gt;&quot;</span> &amp; name &amp; <span class="hljs-string">&quot;&lt;/a&gt;</span><span class="hljs-meta">\n</span><span class="hljs-string">&quot;</span>

<span class="hljs-keyword">template</span> nbSubSection(name: <span class="hljs-built_in">string</span>) =
  <span class="hljs-keyword">let</span> anch = name.toLower.replace(<span class="hljs-string">&quot; &quot;</span>, <span class="hljs-string">&quot;-&quot;</span>)
  nbText: <span class="hljs-string">&quot;&lt;a name=</span><span class="hljs-meta">\&quot;</span><span class="hljs-string">&quot;</span> &amp; anch &amp; <span class="hljs-string">&quot;</span><span class="hljs-meta">\&quot;</span><span class="hljs-string">&gt;&lt;/a&gt;</span><span class="hljs-meta">\n</span><span class="hljs-string">&lt;br&gt;</span><span class="hljs-meta">\n</span><span class="hljs-string">#### &quot;</span> &amp; name &amp; <span class="hljs-string">&quot;</span><span class="hljs-meta">\n</span><span class="hljs-meta">\n</span><span class="hljs-string">&quot;</span>
  nbToc.output.add <span class="hljs-string">&quot;    * &lt;a href=</span><span class="hljs-meta">\&quot;</span><span class="hljs-string">#&quot;</span> &amp; anch &amp; <span class="hljs-string">&quot;</span><span class="hljs-meta">\&quot;</span><span class="hljs-string">&gt;&quot;</span> &amp; name &amp; <span class="hljs-string">&quot;&lt;/a&gt;</span><span class="hljs-meta">\n</span><span class="hljs-string">&quot;</span>

<span class="hljs-comment"># ************ 2. ä¸»é¢˜ç¾åŒ– *************************************</span>
<span class="hljs-keyword">template</span> initCodeTheme* =
  nb.context[<span class="hljs-string">&quot;stylesheet&quot;</span>] = <span class="hljs-string">&quot;&quot;&quot;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/water.css@2/out/water.css&quot;&gt;&quot;&quot;&quot;</span>
  nb.context[<span class="hljs-string">&quot;highlight&quot;</span>] = <span class="hljs-string">&quot;&quot;&quot;
&lt;link rel=&quot;stylesheet&quot; media=&quot;(prefers-color-scheme: dark)&quot;
  href=&quot;https://cdn.jsdelivr.net/gh/highlightjs/highlight.js/src/styles/github-dark.css&quot;&gt;
&lt;link rel=&quot;stylesheet&quot; media=&quot;(prefers-color-scheme: light)&quot;
  href=&quot;https://cdn.jsdelivr.net/gh/highlightjs/highlight.js/src/styles/github.css&quot;&gt;&quot;&quot;&quot;</span>
  nbRawHtml: <span class="hljs-string">&quot;&quot;&quot;
&lt;style&gt;
pre code{border-radius:6px}pre{border:1px solid #809eb7;border-radius:6px 6px 0 0;margin-bottom:0}
pre.nb-output{border:1px solid #809eb7;border-radius:0 0 6px 6px;border-top:none;padding:.8em;margin-top:0;overflow-x:auto;background:#f8f8f8}
&lt;/style&gt;&quot;&quot;&quot;</span>

<span class="hljs-comment"># ************ 3. æ–‡æ¡£å¼€å§‹ ***************************************</span>
nbInit()
initCodeTheme()

nbText: <span class="hljs-string">&quot;&quot;&quot;
# ã€Šç°ä»£ C++ æ‰‹æŠŠæ‰‹å®ç° RPN è®¡ç®—å™¨ã€‹

- ç‰ˆæœ¬ï¼š1.0
- ç¼–è¯‘å™¨ï¼šGCC 10+ / Clang 12+ / MSVC 2019+
- æ ‡å‡†ï¼šC++20
&quot;&quot;&quot;</span>

addToc()

<span class="hljs-comment"># =================================================================</span>
nbNewSection(<span class="hljs-string">&quot;ç¬¬ 1 ç« ï¼šHello RPN&quot;</span>)
<span class="hljs-comment"># =================================================================</span>
nbText: <span class="hljs-string">&quot;&quot;&quot;
å…ˆç»™å‡ºä¸€ä¸ª**æœ€å°å¯è¿è¡Œ**ç‰ˆæœ¬ï¼Œä¿å­˜ä¸º `rpn_min.cpp`ã€‚
&quot;&quot;&quot;</span>

nbSubSection(<span class="hljs-string">&quot;rpn_min.cpp&quot;</span>)
nbRawHtml: <span class="hljs-string">&quot;&quot;&quot;
&lt;pre&gt;&lt;code class=&quot;language-cpp&quot;&gt;#include &amp;lt;iostream&amp;gt;
#include &amp;lt;sstream&amp;gt;
#include &amp;lt;stack&amp;gt;
#include &amp;lt;stdexcept&amp;gt;

double rpn(const std::string&amp; line){
    std::stack&amp;lt;double&amp;gt; st;
    std::istringstream iss(line);
    std::string tok;
    while (iss &gt;&gt; tok){
        if (tok == &quot;+&quot; || tok == &quot;-&quot; || tok == &quot;*&quot; || tok == &quot;/&quot;){
            if (st.size() &lt; 2) throw std::runtime_error(&quot;need 2 operands&quot;);
            double b = st.top(); st.pop();
            double a = st.top(); st.pop();
            switch (tok[0]){
                case '+': st.push(a + b); break;
                case '-': st.push(a - b); break;
                case '*': st.push(a * b); break;
                case '/':
                    if (b == 0) throw std::runtime_error(&quot;divide by 0&quot;);
                    st.push(a / b); break;
            }
        } else {
            st.push(std::stod(tok));
        }
    }
    if (st.size() != 1) throw std::runtime_error(&quot;stack size != 1&quot;);
    return st.top();
}

int main(){
    std::cout &lt;&lt; &quot;RPN&gt; &quot;;
    std::string line;
    std::getline(std::cin, line);
    try {
        std::cout &lt;&lt; &quot;Result: &quot; &lt;&lt; rpn(line) &lt;&lt; '\n';
    } catch (const std::exception&amp; ex){
        std::cerr &lt;&lt; &quot;Error: &quot; &lt;&lt; ex.what() &lt;&lt; '\n';
    }
}
&lt;/code&gt;&lt;/pre&gt;
&quot;&quot;&quot;</span>

nbText: <span class="hljs-string">&quot;&quot;&quot;
ç¼–è¯‘ &amp; è¿è¡Œï¼š
&quot;&quot;&quot;</span>



<span class="hljs-comment"># =================================================================</span>
nbNewSection(<span class="hljs-string">&quot;ç¬¬ 2 ç« ï¼šå¤´æ–‡ä»¶åŒ– + å•å…ƒæµ‹è¯•&quot;</span>)
<span class="hljs-comment"># =================================================================</span>
nbSubSection(<span class="hljs-string">&quot;rpn_engine.hpp&quot;</span>)
nbRawHtml: <span class="hljs-string">&quot;&quot;&quot;
&lt;pre&gt;&lt;code class=&quot;language-cpp&quot;&gt;#pragma once
#include &amp;lt;stack&amp;gt;
#include &amp;lt;sstream&amp;gt;
#include &amp;lt;stdexcept&amp;gt;
#include &amp;lt;string&amp;gt;

double evaluateRPN(const std::string&amp; expr){
    std::stack&amp;lt;double&amp;gt; st;
    std::istringstream iss(expr);
    std::string tok;
    while (iss &gt;&gt; tok){
        if (tok.size() == 1 &amp;&amp; std::string(&quot;+-*/&quot;).find(tok[0]) != std::string::npos){
            if (st.size() &lt; 2) throw std::runtime_error(&quot;stack underflow&quot;);
            double b = st.top(); st.pop();
            double a = st.top(); st.pop();
            switch (tok[0]){
                case '+': st.push(a + b); break;
                case '-': st.push(a - b); break;
                case '*': st.push(a * b); break;
                case '/':
                    if (b == 0) throw std::runtime_error(&quot;divide by zero&quot;);
                    st.push(a / b); break;
            }
        } else {
            st.push(std::stod(tok));
        }
    }
    if (st.size() != 1) throw std::runtime_error(&quot;single value expected&quot;);
    return st.top();
}
&lt;/code&gt;&lt;/pre&gt;
&quot;&quot;&quot;</span>

nbSubSection(<span class="hljs-string">&quot;test.cpp&quot;</span>)
nbRawHtml: <span class="hljs-string">&quot;&quot;&quot;
&lt;pre&gt;&lt;code class=&quot;language-cpp&quot;&gt;#define DOCTEST_CONFIG_IMPLEMENT_WITH_MAIN
#include &quot;doctest/doctest.h&quot;
#include &quot;rpn_engine.hpp&quot;

TEST_CASE(&quot;basic&quot;){
    CHECK(evaluateRPN(&quot;3 4 +&quot;) == 7);
    CHECK(evaluateRPN(&quot;2 3 4 + *&quot;) == 14);
    CHECK(evaluateRPN(&quot;10 2 /&quot;) == 5);
}
TEST_CASE(&quot;exceptions&quot;){
    CHECK_THROWS(evaluateRPN(&quot;1 +&quot;));
    CHECK_THROWS(evaluateRPN(&quot;3 0 /&quot;));
    CHECK_THROWS(evaluateRPN(&quot;1 2 3&quot;));
}
&lt;/code&gt;&lt;/pre&gt;
&quot;&quot;&quot;</span>

nbText: <span class="hljs-string">&quot;&quot;&quot;
ä¸‹è½½ **doctest** å•æ–‡ä»¶å¤´åº“å¹¶æ‰§è¡Œæµ‹è¯•ï¼š
&quot;&quot;&quot;</span>

<span class="hljs-comment"># =================================================================</span>
nbNewSection(<span class="hljs-string">&quot;ç¬¬ 3 ç« ï¼šäº¤äº’å¼ REPL&quot;</span>)
<span class="hljs-comment"># =================================================================</span>
nbText: <span class="hljs-string">&quot;&quot;&quot;
å€ŸåŠ© `linenoise` å•æ–‡ä»¶å¤´åº“å®ç°è¡Œç¼–è¾‘ä¸å†å²ã€‚
&quot;&quot;&quot;</span>

nbSubSection(<span class="hljs-string">&quot;repl.cpp&quot;</span>)
nbRawHtml: <span class="hljs-string">&quot;&quot;&quot;
&lt;pre&gt;&lt;code class=&quot;language-cpp&quot;&gt;#include &quot;rpn_engine.hpp&quot;
#include &quot;linenoise.hpp&quot;
#include &amp;lt;iomanip&amp;gt;

int main(){
    const char* prompt = &quot;rpn&gt; &quot;;
    std::string line;
    while (linenoise::Readline(prompt, line)){
        if (line == &quot;exit&quot; || line == &quot;quit&quot;) break;
        try {
            double v = evaluateRPN(line);
            std::cout &lt;&lt; &quot;= &quot; &lt;&lt; std::setprecision(12) &lt;&lt; v &lt;&lt; '\n';
            linenoise::AddHistory(line.c_str());
        } catch (const std::exception&amp; ex){
            std::cerr &lt;&lt; &quot;error: &quot; &lt;&lt; ex.what() &lt;&lt; '\n';
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;
&quot;&quot;&quot;</span>


<span class="hljs-comment"># =================================================================</span>
nbNewSection(<span class="hljs-string">&quot;ç¬¬ 4 ç« ï¼šå•æ–‡ä»¶å‘å¸ƒ &amp; äº¤å‰ç¼–è¯‘&quot;</span>)
<span class="hljs-comment"># =================================================================</span>
nbText: <span class="hljs-string">&quot;&quot;&quot;
æŠŠå…¨éƒ¨æºç åˆå¹¶æˆ `rpn_single.cpp`ï¼Œ`-Os -s -DNDEBUG` ä¼˜åŒ–åä»… ~92 KBï¼ˆUPX åï¼‰ã€‚
&quot;&quot;&quot;</span>

nbSubSection(<span class="hljs-string">&quot;Linuxâ†’Windows äº¤å‰ç¼–è¯‘&quot;</span>)

<span class="hljs-comment"># =================================================================</span>
nbNewSection(<span class="hljs-string">&quot;ç¬¬ 5 ç« ï¼šè¯¾åæŒ‘æˆ˜&quot;</span>)
<span class="hljs-comment"># =================================================================</span>
nbText: <span class="hljs-string">&quot;&quot;&quot;
1. å¢åŠ å¹‚è¿ç®— (`^`) ä¸å•ç›®è´Ÿå·  
2. æ”¯æŒå˜é‡å­˜å‚¨ (`sto` / `rcl`)  
3. ç”¨ `std::variant` å®ç°é«˜ç²¾åº¦æœ‰ç†æ•°ï¼Œé¿å…æµ®ç‚¹è¯¯å·®  
4. ç¼–è¯‘ä¸º **WebAssembly**ï¼Œåœ¨æµè§ˆå™¨é‡Œè¿è¡Œï¼

ç¥ hacking æ„‰å¿«ï¼
&quot;&quot;&quot;</span>

<span class="hljs-comment"># =================================================================</span>
nbSave()
nbText: <span class="hljs-string">&quot;&quot;&quot;
&quot;&quot;&quot;</span>  <span class="hljs-comment"># å•ç‹¬ä¸€è¡Œï¼Œé¡¶æ ¼å†™</span>
<span class="hljs-comment"># å†ç•™ä¸€ä¸ªç©ºè¡Œ</span>
</code></pre>
</section><script>
function toggleSourceDisplay() {
  var btn = document.getElementById("show")
  var source = document.getElementById("source");
  if (btn.innerHTML=="Show Source") {
    btn.innerHTML = "Hide Source";
    source.style.display = "block";
  } else {
    btn.innerHTML = "Show Source";
    source.style.display = "none";
  }
}
</script></body>
</html>
